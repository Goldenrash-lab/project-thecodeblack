{"mappings":"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","sources":["src/js/cart.js","src/js/templates/cart-postApi.js","src/js/templates/cart-validation.js"],"sourcesContent":["import axios from 'axios';\nimport '../../node_modules/modern-normalize/modern-normalize.css';\nimport './templates/footer-validation';\nimport './templates/footer-postApi';\nimport './templates/cart-postApi';\nimport './templates/cart-validation';\n\n// CART VALUE\n\nconst spanCasa = document.querySelector('.css-span-casa');\nconst loaderEl = `<div class=\"loader\"></div>`;\n\nfunction onDocumentLoad() {\n  const obj = loadToLS('cartIds');\n  if (!Object.keys(obj).length) {\n    spanCasa.innerHTML = `CART(0)`;\n  } else {\n    spanCasa.innerHTML = `CART(${Object.keys(obj).length})`;\n  }\n}\n\n// Ð¡Ð²ÑÐ·Ñ‹Ð²Ð°ÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¸ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ\nconst refs = {\n  cartHeading: document.querySelector('#cart-heading'),\n  productList: document.querySelector('#cart-product-list'),\n  warningContainer: document.querySelector('#warning-container'),\n  baseContainer: document.querySelector('#cart-base-container'),\n  closeButton: document.querySelector('.close-button'),\n  deleteAllBtn: document.querySelector('#button-wrapper'),\n  totalWrapper: document.querySelector('#total-wrapper'),\n};\n\n//Ð´Ð¾ÑÑ‚Ð°Ñ‘Ð¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· local storage\n// const cartIdsData = localStorage.getItem('cartIds');\n//\nconst cartIdsArray = loadToLS('cartIds');\ngetCartProducts(cartIdsArray);\n\n//Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…\nfunction getCartProducts(cartIds) {\n  const BASE_URL = 'https://food-boutique.b.goit.study/api/products';\n  refs.productList.innerHTML = loaderEl;\n  refs.productList.classList.add('load-discount');\n  refs.totalWrapper.innerHTML = loaderEl;\n  refs.totalWrapper.classList.add('load-total');\n  Promise.all(\n    // *****\n    Object.keys(cartIds).map(productId => {\n      return axios\n        .get(`${BASE_URL}/${productId}`)\n        .then(response => {\n          if (!response.data) {\n            throw new Error(`ÐžÑˆÐ¸Ð±ÐºÐ° HTTP: ${response.status}`);\n          }\n          return response.data;\n        })\n        .catch(error => {\n          console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°:', error);\n          throw error;\n        });\n    })\n  )\n    .then(productsData => {\n      scrollAdding(productsData.length);\n      cartLargeNumber(productsData.length);\n      renderProductsCart(productsData);\n      countTotalPrice(productsData);\n      refs.productList.classList.remove('load-discount');\n    })\n    .catch(error => {\n      console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²:', error);\n    });\n}\n\n// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÑˆÐ°Ð±Ð»Ð¾Ð½ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð¸ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼ ÐµÐ³Ð¾ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ\nfunction renderProductsCart(products) {\n  const markup = products\n    .map(el => {\n      const { category, img, name, price, size, _id } = el;\n\n      return `<li class=\"product-item\" data-productId=\"${_id}\">\n            <div class=\"product-img-wrapper\">\n              <img\n              class=\"product-item-img\"\n              src=\"${img}\"\n              alt=\"${name}\"\n              loading=\"lazy\"\n            />\n            </div>\n\n            <div class=\"product-item-content\">\n              <div class=\"characteristic-wrapper\">\n                <h3 class=\"product-item-heading product-bold\">${name}</h3>\n                <div class=\"charactetistic-text-container\">\n                  <span class=\"product-item-text\">\n                    <span class=\"key-span\">Category:</span>\n                    ${category}\n                  </span>\n                  <span class=\"product-item-text\">\n                    <span class=\"key-span\">Size:</span>\n                    ${size}\n                  </span>\n                </div>\n              </div>\n\n              <p class=\"product-price\">&#36;${price}</p>\n            </div>\n            <button type=\"button\" class=\"close-button product-bold\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"close-icon\" width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\">\n                    <path d=\"M11.0625 2.11488L9.88512 0.9375L6 4.82262L2.11488 0.9375L0.9375 2.11488L4.82262 6L0.9375 9.88512L2.11488 11.0625L6 7.17738L9.88512 11.0625L11.0625 9.88512L7.17738 6L11.0625 2.11488Z\" fill=\"#010101\"/>\n                </svg>\n              </button>\n\n            <div class=\"counter__wrapper\">\n              <button class=\"counter__btn\" type=\"button\" data-action=\"decrement\"> - </button>\n              <span class=\"counter__value\">1</span>\n              <button class=\"counter__btn\" type=\"button\" data-action=\"increment\"> + </button>\n            </div>\n\n          </li>`;\n    })\n    .join('');\n\n  return (refs.productList.innerHTML = markup);\n}\n\n// Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð² Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹\nfunction cartLargeNumber(cartLargeNumber) {\n  if (cartLargeNumber === 0) {\n    refs.warningContainer.classList.remove('visually-hidden');\n    refs.baseContainer.classList.add('visually-hidden');\n  }\n\n  refs.cartHeading.innerHTML = `CART (${cartLargeNumber})`;\n}\n\n// Ð¿Ð¾Ð´ÑÑ‡ÐµÑ‚ Ð¾Ð±Ñ‰ÐµÐ¹ ÑÑƒÐ¼Ð¼Ñ‹\nfunction countTotalPrice(priceArray) {\n  let totalPrice = 0;\n\n  priceArray.forEach(product => {\n    return (totalPrice += product.price);\n  });\n\n  return (refs.totalWrapper.innerHTML = `\n        <span class=\"key-span\">Sum:</span>\n        <span class=\"price-text\">&#36;${totalPrice.toFixed(2)}</span>\n    `);\n}\n\n// Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°\nfunction clickDeleteElBtn(event) {\n  const btn = event.target.closest('.close-button');\n  if (!btn) {\n    return;\n  }\n  const element = btn.parentElement;\n  const productId = element.getAttribute('data-productid');\n\n  btn.parentElement.remove();\n\n  updateLocalStorage(productId);\n  const obj = loadToLS('cartIds');\n  spanCasa.innerHTML = `CART(${Object.keys(obj).length})`;\n}\n\n//Ð£Ð´Ð°Ð»ÑÐµÐ¼ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ ÑÐ¿Ð¸ÑÐºÐ° Ð¿Ð¾ Ð½Ð°Ð¶Ð°Ñ‚Ð¸ÑŽ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÑƒ Delete All\nfunction clickDeleteAllBtn() {\n  refs.cartHeading.innerHTML = 'CART (0)';\n  refs.warningContainer.classList.remove('visually-hidden');\n  refs.baseContainer.innerHTML = '';\n  // ***\n  // localStorage.setItem('cartIds', JSON.stringify([]));\n  localStorage.setItem('cartIds', JSON.stringify({}));\n  const obj = loadToLS('cartIds');\n  spanCasa.innerHTML = `CART(${Object.keys(obj).length})`;\n}\n\n// Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ local storage Ð¿Ð¾ÑÐ»Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°\nfunction updateLocalStorage(elementToRemove) {\n  // const cartIdsData = localStorage.getItem('cartIds');\n  // const cartIdsArray = JSON.parse(cartIdsData);\n  const cartIdsArray = loadToLS('cartIds');\n\n  delete cartIdsArray[elementToRemove];\n\n  // const updatedCartIds = Object.keys(cartIdsArray).filter(id => id !== elementToRemove);\n  // localStorage.setItem('cartIds', JSON.stringify(updatedCartIds));\n  saveToLS('cartIds', cartIdsArray);\n  cartLargeNumber(Object.keys(cartIdsArray).length);\n\n  getCartProducts(cartIdsArray);\n}\n\n// Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÐºÑ€Ð¾Ð»Ð», ÐºÐ¾Ð³Ð´Ð° 3 ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð¸ Ð±Ð¾Ð»ÑŒÑˆÐµ\nfunction scrollAdding(listLength) {\n  if (listLength > 3) {\n    refs.productList.classList.add('scroll-adding');\n  }\n}\n\n// Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÐ»ÑƒÑˆÐ°Ñ‚ÐµÐ»ÐµÐ¹ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð½Ð° ÑÐ¿Ð¸ÑÐ¾Ðº Ð¸ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð¿Ð¾Ð»Ð½Ð¾Ð³Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ\n\ndocument.addEventListener('DOMContentLoaded', onDocumentLoad);\nrefs.productList.addEventListener('click', clickDeleteElBtn);\nrefs.deleteAllBtn.addEventListener('click', clickDeleteAllBtn);\n\n// ÑÐºÑÐ¿Ð¾Ñ€Ñ‚ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹\nexport function saveToLS(key, value) {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (error) {\n    console.log(error.message);\n  }\n}\nexport function loadToLS(key) {\n  try {\n    return JSON.parse(localStorage.getItem(key)) || {};\n  } catch (error) {\n    console.log(error.message);\n    return localStorage.getItem(key);\n  }\n}\n\n/**\n  |============================\n  | COUNTER\n  |============================\n*/\n\nrefs.productList.addEventListener('click', e => {\n  const target = e.target;\n\n  if (target.classList.contains('counter__btn')) {\n    const cartItem = target.closest('.product-item');\n\n    const counterValue = cartItem.querySelector('.counter__value');\n    const counterAction = target.getAttribute('data-action');\n    const id = cartItem.dataset.productid;\n\n    const localStorageItemParse = loadToLS('cartIds');\n    let counter = parseInt(counterValue.textContent);\n\n    if (counterAction === 'increment') {\n      counter += 1;\n    } else if (counterAction === 'decrement' && counter > 1) {\n      counter -= 1;\n    }\n\n    counterValue.textContent = counter;\n\n    if (Object.keys(localStorageItemParse).includes(id)) {\n      localStorageItemParse[id] = counter;\n\n      saveToLS('cartIds', localStorageItemParse);\n    }\n\n    recalculateTotalPrice();\n  }\n});\n\nfunction recalculateTotalPrice() {\n  const productsInCart = Array.from(\n    refs.productList.querySelectorAll('.product-item')\n  );\n\n  let totalPrice = 0;\n  let totalCartQuantity = 0;\n\n  productsInCart.forEach(productEl => {\n    const quantity = parseInt(\n      productEl.querySelector('.counter__value').textContent\n    );\n    const price = parseFloat(\n      productEl.querySelector('.product-price').textContent.replace('$', '')\n    );\n    totalPrice += price * quantity;\n\n    totalCartQuantity += quantity;\n    // spanCasa.textContent = `Cart(${totalCartQuantity})`;\n    // refs.cartHeading.innerHTML = `Cart(${totalCartQuantity})`;\n  });\n\n  refs.totalWrapper.innerHTML = `\n        <span class=\"key-span\">Sum:</span>\n        <span class=\"price-text\">&#36;${totalPrice.toFixed(2)}</span>\n    `;\n}\n\nexport { clickDeleteAllBtn };\n","import axios from 'axios';\nimport Notiflix, { Notify } from 'notiflix';\n\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api';\n\nconst makeCheckout = savedOrder => {\n  return axios.post('/orders', savedOrder).then(response => {\n    if (response.status === 400) {\n      throw response.data.message;\n    }\n    Notiflix.Notify.success(\n      'Order Success! Thank you for shopping at Food Boutique. Your order has been received and is now being freshly prepared just for you! Get ready to indulge in nourishing goodness, delivered right to your doorstep. We re thrilled to be part of your journey to better health and happiness. ðŸŒ¿ðŸŽ'\n    );\n  });\n};\n\nexport { makeCheckout };\n","import throttle from 'lodash.throttle';\nimport { makeCheckout } from './cart-postApi';\nimport { clickDeleteAllBtn } from '../cart';\nimport Notiflix from 'notiflix';\n\nconst cartForm = document.querySelector('.form-wrapper');\n\nconst STORAGE_KEY = 'order';\nlet order = {\n  email: '',\n  products: [],\n};\n\nconst makeOrder = () => {\n  const cartIdsData = JSON.parse(localStorage.getItem('cartIds'));\n\n  const keys = Object.keys(cartIdsData);\n  for (const key of keys) {\n    const amount = document.querySelector(\n      `[data-productid=\"${key}\"] .counter__value`\n    ).textContent;\n    order.products.push({ productId: key, amount: +amount });\n  }\n\n  // const cardsIds = Object.keys(cartIdsData);\n  // order.products = cardsIds.map(id => {\n  //   const amount = document.querySelector(\n  //     `[data-productid=\"${id}\"] .counter__value`\n  //   ).textContent;\n  //   return { productId: id, amount: +amount };\n  // });\n  return order;\n};\n\nlet value = '';\n\ncartForm.addEventListener('input', throttle(onEmailInput, 400));\n\nconst userEmail = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};\n\nfunction onEmailInput(e) {\n  userEmail[e.target.name] = e.target.value;\n  value = e.target.value;\n  order.email = value;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(order));\n}\n\ncartForm.addEventListener('submit', onCheckout);\n\nfunction onCheckout(e) {\n  e.preventDefault();\n  order = makeOrder();\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(order));\n  const savedOrder = JSON.parse(localStorage.getItem(STORAGE_KEY));\n\n  makeCheckout(savedOrder)\n    .then(res => {\n      cartForm.reset();\n      localStorage.removeItem(STORAGE_KEY);\n      clickDeleteAllBtn();\n    })\n    .catch(err => {\n      Notiflix.Notify.failure(err.response.data.message);\n    });\n}\n"],"names":["$dIxxU","parcelRequire","default","defaults","baseURL","$53d75c756e064705$export$ccc883122007ba34","savedOrder","post","then","response","status","data","message","$parcel$interopDefault","$6JpON","Notify","success","$dCfNN","$3ac10f45063dbf7c$var$cartForm","document","querySelector","$3ac10f45063dbf7c$var$STORAGE_KEY","$3ac10f45063dbf7c$var$order","email","products","$3ac10f45063dbf7c$var$value","addEventListener","e","$3ac10f45063dbf7c$var$userEmail","target","name","value","localStorage","setItem","JSON","stringify","parse","getItem","preventDefault","cartIdsData","keys","Object","key","amount","textContent","push","productId","$3ac10f45063dbf7c$var$makeOrder","res","reset","removeItem","$ce375e1befa17f1c$export$349050602dcd5ac2","catch","err","failure","$ce375e1befa17f1c$var$spanCasa","$ce375e1befa17f1c$var$loaderEl","$ce375e1befa17f1c$var$refs","cartHeading","productList","warningContainer","baseContainer","closeButton","deleteAllBtn","totalWrapper","$ce375e1befa17f1c$var$getCartProducts","cartIds","innerHTML","classList","add","Promise","all","map","get","Error","error","console","productsData","length","$ce375e1befa17f1c$var$cartLargeNumber","markup","el","category","img","price","size","_id","join","$ce375e1befa17f1c$var$renderProductsCart","priceArray","totalPrice","forEach","product","toFixed","$ce375e1befa17f1c$var$countTotalPrice","remove","cartLargeNumber1","obj","$ce375e1befa17f1c$export$5b58afb9966d95d6","$ce375e1befa17f1c$export$53c15ea6e761c354","log","event","btn","closest","parentElement","getAttribute","elementToRemove","cartIdsArray1","$ce375e1befa17f1c$var$updateLocalStorage","contains","cartItem","counterValue","counterAction","id","dataset","productid","localStorageItemParse","counter","parseInt","includes","productsInCart","Array","from","querySelectorAll","totalCartQuantity","productEl","quantity","parseFloat","replace","$ce375e1befa17f1c$var$recalculateTotalPrice"],"version":3,"file":"cart.ecae492a.js.map"}