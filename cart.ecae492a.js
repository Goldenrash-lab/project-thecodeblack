!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=e.parcelRequirec1c0;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){r[t]=e},e.parcelRequirec1c0=o);var a=o("dIxxU");o("4fCfA"),o("534RT");a=o("dIxxU");var s=o("6JpON");a.default.defaults.baseURL="https://food-boutique.b.goit.study/api";const c=e=>a.default.post("/orders",e).then((e=>{if(400===e.status)throw e.data.message;t(s).Notify.success("Order Success! Thank you for shopping at Food Boutique. Your order has been received and is now being freshly prepared just for you! Get ready to indulge in nourishing goodness, delivered right to your doorstep. We re thrilled to be part of your journey to better health and happiness. 🌿🍎")}));var i=o("dCfNN");s=o("6JpON");const l=document.querySelector(".form-wrapper"),d="order";let u={email:"",products:[]};let p="";l.addEventListener("input",t(i)((function(t){g[t.target.name]=t.target.value,p=t.target.value,u.email=p,localStorage.setItem(d,JSON.stringify(u))}),400));const g=JSON.parse(localStorage.getItem(d))||{};l.addEventListener("submit",(function(e){e.preventDefault(),u=(()=>{const t=JSON.parse(localStorage.getItem("cartIds")),e=Object.keys(t);for(const t of e){const e=document.querySelector(`[data-productid="${t}"] .counter__value`).textContent;u.products.push({productId:t,amount:+e})}return u})(),localStorage.setItem(d,JSON.stringify(u));const n=JSON.parse(localStorage.getItem(d));c(n).then((t=>{l.reset(),localStorage.removeItem(d),b()})).catch((e=>{t(s).Notify.failure(e.response.data.message)}))}));const f=document.querySelector(".css-span-casa"),m='<div class="loader"></div>';const y={cartHeading:document.querySelector("#cart-heading"),productList:document.querySelector("#cart-product-list"),warningContainer:document.querySelector("#warning-container"),baseContainer:document.querySelector("#cart-base-container"),closeButton:document.querySelector(".close-button"),deleteAllBtn:document.querySelector("#button-wrapper"),totalWrapper:document.querySelector("#total-wrapper")};function h(t){y.productList.innerHTML=m,y.productList.classList.add("load-discount"),y.totalWrapper.innerHTML=m,y.totalWrapper.classList.add("load-total"),Promise.all(Object.keys(t).map((t=>a.default.get(`https://food-boutique.b.goit.study/api/products/${t}`).then((t=>{if(!t.data)throw new Error(`Ошибка HTTP: ${t.status}`);return t.data})).catch((t=>{throw console.error("Ошибка при выполнении запроса:",t),t}))))).then((t=>{t.length>3&&y.productList.classList.add("scroll-adding"),L(t.length),function(t){const e=t.map((t=>{const{category:e,img:n,name:r,price:o,size:a,_id:s}=t;return`<li class="product-item" data-productId="${s}">\n            <div class="product-img-wrapper">\n              <img\n              class="product-item-img"\n              src="${n}"\n              alt="${r}"\n              loading="lazy"\n            />\n            </div>\n\n            <div class="product-item-content">\n              <div class="characteristic-wrapper">\n                <h3 class="product-item-heading product-bold">${r}</h3>\n                <div class="charactetistic-text-container">\n                  <span class="product-item-text">\n                    <span class="key-span">Category:</span>\n                    ${e}\n                  </span>\n                  <span class="product-item-text">\n                    <span class="key-span">Size:</span>\n                    ${a}\n                  </span>\n                </div>\n              </div>\n\n              <p class="product-price">&#36;${o}</p>\n            </div>\n            <button type="button" class="close-button product-bold">\n                <svg xmlns="http://www.w3.org/2000/svg" class="close-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">\n                    <path d="M11.0625 2.11488L9.88512 0.9375L6 4.82262L2.11488 0.9375L0.9375 2.11488L4.82262 6L0.9375 9.88512L2.11488 11.0625L6 7.17738L9.88512 11.0625L11.0625 9.88512L7.17738 6L11.0625 2.11488Z" fill="#010101"/>\n                </svg>\n              </button>\n\n            <div class="counter__wrapper">\n              <button class="counter__btn" type="button" data-action="decrement"> - </button>\n              <span class="counter__value">1</span>\n              <button class="counter__btn" type="button" data-action="increment"> + </button>\n            </div>\n\n          </li>`})).join("");y.productList.innerHTML=e}(t),function(t){let e=0;t.forEach((t=>e+=t.price)),y.totalWrapper.innerHTML=`\n        <span class="key-span">Sum:</span>\n        <span class="price-text">&#36;${e.toFixed(2)}</span>\n    `}(t),y.productList.classList.remove("load-discount")})).catch((t=>{console.error("Ошибка при выполнении запросов:",t)}))}function L(t){0===t&&(y.warningContainer.classList.remove("visually-hidden"),y.baseContainer.classList.add("visually-hidden")),y.cartHeading.innerHTML=`CART (${t})`}function b(){y.cartHeading.innerHTML="CART (0)",y.warningContainer.classList.remove("visually-hidden"),y.baseContainer.innerHTML="",localStorage.setItem("cartIds",JSON.stringify({}));const t=S("cartIds");f.innerHTML=`CART(${Object.keys(t).length})`}function v(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){console.log(t.message)}}function S(t){try{return JSON.parse(localStorage.getItem(t))||{}}catch(e){return console.log(e.message),localStorage.getItem(t)}}h(S("cartIds")),document.addEventListener("DOMContentLoaded",(function(){const t=S("cartIds");Object.keys(t).length?f.innerHTML=`CART(${Object.keys(t).length})`:f.innerHTML="CART(0)"})),y.productList.addEventListener("click",(function(t){const e=t.target.closest(".close-button");if(!e)return;const n=e.parentElement.getAttribute("data-productid");e.parentElement.remove(),function(t){const e=S("cartIds");delete e[t],v("cartIds",e),L(Object.keys(e).length),h(e)}(n);const r=S("cartIds");f.innerHTML=`CART(${Object.keys(r).length})`})),y.deleteAllBtn.addEventListener("click",b),y.productList.addEventListener("click",(t=>{const e=t.target;if(e.classList.contains("counter__btn")){const t=e.closest(".product-item"),n=t.querySelector(".counter__value"),r=e.getAttribute("data-action"),o=t.dataset.productid,a=S("cartIds");let s=parseInt(n.textContent);"increment"===r?s+=1:"decrement"===r&&s>1&&(s-=1),n.textContent=s,Object.keys(a).includes(o)&&(a[o]=s,v("cartIds",a)),function(){const t=Array.from(y.productList.querySelectorAll(".product-item"));let e=0,n=0;t.forEach((t=>{const r=parseInt(t.querySelector(".counter__value").textContent),o=parseFloat(t.querySelector(".product-price").textContent.replace("$",""));e+=o*r,n+=r})),y.totalWrapper.innerHTML=`\n        <span class="key-span">Sum:</span>\n        <span class="price-text">&#36;${e.toFixed(2)}</span>\n    `}()}}))}();
//# sourceMappingURL=cart.ecae492a.js.map
